!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser"),require("rxjs/ReplaySubject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/platform-browser","rxjs/ReplaySubject"],e):e((t.ng=t.ng||{},t.ng["ngx-scroll-to"]={}),t.ng.core,t.ng.common,t.ng.platformBrowser,t.Rx)}(this,function(t,e,o,n,r){"use strict";function i(t){var e={};return Object.keys(t).filter(function(e){return void 0!==t[e]}).forEach(function(o){return e[o]=t[o]}),Object.assign({},p,e)}function s(t){return"#"===t.substring(0,1)?t.substring(1):t}function a(t){return"string"==typeof t||t instanceof String}function l(t){return t===window}function u(t){return t instanceof e.ElementRef}function c(t){return!isNaN(parseFloat(t))&&isFinite(t)}function f(t){return void 0===t&&(t=0),function(e,o,n){var r=n.value;return n.value=function(){for(var e=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];setTimeout(function(){return r.apply(e,o)},t)},n}}var p={target:null,event:"click",duration:650,easing:"easeInOutQuad",offset:0,offsetMap:new Map},_={easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeOutElastic:function(t){return Math.pow(2,-10*t)*Math.sin((t-.25)*(2*Math.PI)/1)+1}},g=["click","mouseenter","mouseover","mousedown","mouseup","dblclick","contextmenu","wheel","mouseleave","mouseout"],h=function(){function t(t,e,o,n,i,s){var a=this;this._container=t,this._listenerTarget=e,this._is_window=o,this._to=n,this._options=i,this._is_browser=s,this._loop=function(){a._time_lapsed+=a._tick,a._percentage=a._time_lapsed/a._options.duration,a._percentage=a._percentage>1?1:a._percentage,a._position=a._start_position+(a._start_position-a._to<0?1:-1)*a._distance*_[a._options.easing](a._percentage),a._source$.next(a._position),a._is_window?a._listenerTarget.scrollTo(0,Math.floor(a._position)):a._container.scrollTop=Math.floor(a._position),a.stop(!1)},this._tick=16,this._interval=null,this._time_lapsed=0,this._windowScrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,this._start_position=this._is_window?this._windowScrollTop:this._container.scrollTop,this._is_window||(this._to=this._to-this._container.getBoundingClientRect().top+this._start_position),this._distance=Math.abs(this._start_position-this._to);var l=this._options.offset;this._is_browser&&this._options.offsetMap.forEach(function(t,e){return l=window.innerWidth>e?t:l}),this._distance+=l,this._source$=new r.ReplaySubject}return t.prototype.start=function(){return clearInterval(this._interval),this._interval=setInterval(this._loop,this._tick),this._source$.asObservable()},t.prototype.stop=function(t){void 0===t&&(t=!0);var e=this._is_window?this._windowScrollTop:this._container.scrollTop;(t||this._position===this._to+this._options.offset||e===this._to+this._options.offset)&&(clearInterval(this._interval),this._interval=null,this._source$.complete())},t}(),d=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},m=function(){function t(t,e){this._document=t,this._platform_id=e}return t.prototype.scrollTo=function(t,e){return o.isPlatformBrowser(this._platform_id)?this._start(t,e):(new r.ReplaySubject).asObservable()},t.prototype._start=function(t,e){var n=this,r=i(e);this._animation&&this._animation.stop();var s=this._getFirstScrollableParent(t.target),a=this._getTargetNode(r.target),u=this._getListenerTarget(s),c=l(u),f=c?a.offsetTop:a.getBoundingClientRect().top;this._animation=new h(s,u,c,f,r,o.isPlatformBrowser(this._platform_id));var p=["mousewheel","DOMMouseScroll","touchstart"],_=function(){return n._animation.stop()};this._addStopEventListeners(p,u,_);var g=this._animation.start(),d=g.subscribe(function(){},function(){},function(){n._removeStopEventListeners(p,u,_),d.unsubscribe()});return g},t.prototype._addStopEventListeners=function(t,e,o){t.forEach(function(t){return e.addEventListener(t,o)})},t.prototype._removeStopEventListeners=function(t,e,o){t.forEach(function(t){return e.removeEventListener(t,o)})},t.prototype._getFirstScrollableParent=function(t){var e=window.getComputedStyle(t),o=/(auto|scroll)/;if("fixed"===e.position)throw new Error("Scroll item cannot be positioned 'fixed'");for(var n=t;n=n.parentElement;null)if("absolute"!==(e=window.getComputedStyle(n)).position&&"hidden"!==e.overflow&&"hidden"!==e.overflowY){if(o.test(e.overflow+e.overflowY+e.overflowX))return n;if("BODY"===n.tagName)return n}throw new Error("No scrollable parent found for element "+t.nodeName)},t.prototype._getTargetNode=function(t){var e;if(a(t)?e=this._document.getElementById(s(t)):c(t)?e=this._document.getElementById(String(t)):u(t)&&(e=t.nativeElement),!e)throw new Error("Unable to find Target Element");return e},t.prototype._getListenerTarget=function(t){return"BODY"===t.tagName.toUpperCase()?window:t},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[n.DOCUMENT]}]},{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},d([f()],t.prototype,"scrollTo",null),t}(),v=function(){function t(t,e,o){this._elementRef=t,this._scrollToService=e,this._renderer2=o,this.ngxScrollTo=p.target,this.ngxScrollToEvent=p.event,this.ngxScrollToDuration=p.duration,this.ngxScrollToEasing=p.easing,this.ngxScrollToOffset=p.offset,this.ngxScrollToOffsetMap=p.offsetMap}return t.prototype.ngAfterViewInit=function(){var t=this;if(!g.includes(this.ngxScrollToEvent))throw new Error("Unsupported Event '"+this.ngxScrollToEvent+"'");this._renderer2.listen(this._elementRef.nativeElement,this.ngxScrollToEvent,function(e){t._config={target:t.ngxScrollTo,duration:t.ngxScrollToDuration,easing:t.ngxScrollToEasing,offset:t.ngxScrollToOffset,offsetMap:t.ngxScrollToOffsetMap},t._scrollToService.scrollTo(e,t._config)})},t.decorators=[{type:e.Directive,args:[{selector:"[ngx-scroll-to]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:m},{type:e.Renderer2}]},t.propDecorators={ngxScrollTo:[{type:e.Input,args:["ngx-scroll-to"]}],ngxScrollToEvent:[{type:e.Input,args:["ngx-scroll-to-event"]}],ngxScrollToDuration:[{type:e.Input,args:["ngx-scroll-to-duration"]}],ngxScrollToEasing:[{type:e.Input,args:["ngx-scroll-to-easing"]}],ngxScrollToOffset:[{type:e.Input,args:["ngx-scroll-to-offset"]}],ngxScrollToOffsetMap:[{type:e.Input,args:["ngx-scroll-to-offset-map"]}]},t}(),w=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[m]}},t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule],declarations:[v],exports:[v]}]}],t.ctorParameters=function(){return[]},t}();t.ScrollToModule=w,t.ScrollToService=m,Object.defineProperty(t,"__esModule",{value:!0})});